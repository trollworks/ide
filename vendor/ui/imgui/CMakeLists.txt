cmake_minimum_required(VERSION 3.22.0)
project(imgui CXX)

file(GLOB_RECURSE IMGUI_SOURCES
  ${PROJECT_SOURCE_DIR}/src/*.cpp
)

file(GLOB_RECURSE IMGUI_HEADERS
  ${PROJECT_SOURCE_DIR}/include/*.h
)

add_library(imgui STATIC ${IMGUI_HEADERS} ${IMGUI_SOURCES})

target_include_directories(imgui
  PUBLIC "${PROJECT_SOURCE_DIR}/include"
  PRIVATE "$<TARGET_PROPERTY:SDL2-static,INTERFACE_INCLUDE_DIRECTORIES>"
)

install(
  TARGETS imgui
  ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}" COMPONENT devel
  LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}" COMPONENT library
  RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}" COMPONENT library
)

install(
  DIRECTORY "${PROJECT_SOURCE_DIR}/include/imgui/"
  DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/imgui" COMPONENT DEVEL
  FILES_MATCHING PATTERN "*.h"
)

install(
  FILES "${PROJECT_SOURCE_DIR}/include/imgui.h"
  DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/" COMPONENT DEVEL
)

install(FILES "LICENSE.txt"
  DESTINATION "${CMAKE_INSTALL_DATAROOTDIR}/licenses/${PROJECT_NAME}"
  COMPONENT library
)
